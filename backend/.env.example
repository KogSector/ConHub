# ConHub Backend Service Environment Variables
# Copy this file to .env and fill in your actual values

# === Service ===
BACKEND_PORT=8000
ENV_MODE=development

# Feature toggles file path (defaults to ./feature-toggles.json if unset)
FEATURE_TOGGLES_PATH=feature-toggles.json

# === Database ===
# Set to your Postgres connection string when Auth is enabled.
# Local example:
# DATABASE_URL=postgresql://conhub_user:conhub_password@localhost:5432/conhub_db
# Neon example (ensure sslmode=require):
# DATABASE_URL=postgresql://USER:PASS@HOST:PORT/DB?sslmode=require
DATABASE_URL=

# Redis connection URL (required when Auth is enabled)
REDIS_URL=redis://localhost:6379

# Qdrant vector database (used by indexing)
QDRANT_URL=http://localhost:6333

# === Embedding Service ===
EMBEDDING_SERVICE_URL=http://localhost:8082
EMBEDDING_REQUEST_TIMEOUT_MS=5000
EMBEDDING_REQUEST_RETRIES=2
EMBEDDING_MAX_INFLIGHT=64

# === Authentication ===
# When Auth is enabled in feature-toggles.json, JWT_SECRET must be set.
# Generate a strong secret, e.g. `openssl rand -base64 32`
JWT_SECRET=

# Optional OAuth providers
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=

# === Email (optional) ===
SMTP_HOST=
SMTP_PORT=
SMTP_USERNAME=
SMTP_PASSWORD=

# === Billing (optional) ===
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# === AI (optional) ===
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# === Data sources (optional) ===
GITHUB_TOKEN=
GITLAB_TOKEN=
NOTION_TOKEN=

# === Webhooks (optional) ===
GITHUB_WEBHOOK_SECRET=
GITLAB_WEBHOOK_SECRET=

# === Indexing configuration ===
MAX_FILE_SIZE=10485760       # 10 MB
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_CONCURRENT_INDEXING=4

# === Logging ===
RUST_LOG=info

# Notes:
# - Database and Redis are only required when Auth is enabled via feature-toggles.json
# - For managed Postgres providers like Neon, include `sslmode=require` in DATABASE_URL
# - Never commit .env files to version control